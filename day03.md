### 3.1~3.5 总结

1. 字单元，即存放一个字型数据（16位）的内存单元由两个连续地址的内存单元组成，即起始地址 N 和 N + 1 的地址合并，例如：

```
0   20H
1   4EH
2   12H
3   00H
```

上例中，00 和 01 就可以组成一个字单元，高位字节在前，低位字节在后，得到：4E20H



2. DS 寄存器，用于存储段地址，[...] 表示一个偏移地址，我们可以写入段地址到 DS 寄存器上，当我们执行指令时，CPU 会自动读取 DS 寄存器的段地址，组成物理地址，从而读取数据，如下例：

```
MOV BX,1000     ; 将 1000H 写入 BX 寄存器中
MOV DS,BX       ; 将 BX 寄存器的数据写入 DS 寄存器中
MOV AL,[0]      ; [0] = DS:[0] = 1000:0 ，然后将其地址内的数据写入到 AL 中
```

*如果尝试直接写入数据到 DS 寄存器中，是非法的，必须要通过另一个寄存器进行中转*

---

### 3.6~3.10 总结（很重要）

1. 栈是一种具有特殊的访问方式的存储空间，它只有入栈和出栈，且栈中的元素遵循 "后进先出" 的规则：

   - 入栈：将一个新的元素放入到栈顶

   - 出栈：从栈顶中取出一个元素

   - 后进先出：最后入栈的元素，总是第一个被取出的

   - 入栈和出栈操作都是以字为单位进行的



2. 基本的入栈和出栈指令：`push` 和 `pop`
   - 入栈指令： `push 寄存器` 		；将一个寄存器中的数据送入栈
     - 执行步骤：SP 的值 -2，再向 SS:SP 所指的字单元送入数据（两步）
   - 出栈指令：`pop 寄存器`            ；用一个寄存器接收出栈的数据
     - 执行步骤：向 SS:SP 所指向的字单元中读取数据，然后 SP 的值 +2（两步）



3. SS 寄存器，用于指定栈堆的段地址，SP 寄存器，用于指定栈顶位置，两者组合，指向栈顶元素

   - push 和 pop 指令就是靠 SS 寄存器和 SP 寄存器进行定位的

     - 跟 CS:IP 类似，SS 负责指定栈的段地址，SP 负责栈顶地址（偏移地址）
     - 但是 SS:SP 只记录栈顶，栈大小需要我们直接管理

     

   - SS 寄存器指定一个段地址为栈堆，SP 寄存器指定栈顶位置（栈顶要从高地址向低地址增长）

     - 例如：将 1000H ~ 100FH 指定为栈，SS=1000H，那么 SP=0010H

       

   - *送入* 或 *送出*  一个字的数据，那么栈顶就要 *向前*  或 *向后*  移动两位

     - 例如：`push ax` 指令运行，则 SP = SP  - 2

     

   - 一个栈段最大为 64KB

     - push 和 pop 等指令执行时只修改 SP 值，所以栈顶的变化范围是：0~FFFF
     - 从空栈的时候 SP=0，一直压栈，直到栈满时 SP=0，如果再次压栈，栈顶将环绕，覆盖原来的内容，所以一个栈段的容量最大为 64KB
